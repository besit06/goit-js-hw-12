{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '46065399-355f71206950d55166b7078e9';\nconst BASE_URL = `https://pixabay.com/api/`;\n\nimport axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n      throw error;\n      \n  }\n\n}\n      ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = ''; \n\n  appendImages(images);\n}\n\nexport function appendImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images.map(image => {\n    return `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" target=\"_blank\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </li>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup); \n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, appendImages, showErrorMessage } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = form.querySelector('input[name=\"searchQuery\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet query = '';\n\n\n\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nform.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  query = input.value.trim();\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (query === '') {\n    showErrorMessage('Please enter a search query.');\n    return;\n  }\n\n  await loadImages(query, currentPage);\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  await loadImages(query, currentPage);\n}\n\nasync function loadImages(query, page) {\n  try {\n    showLoader();\n    \n    loadMoreButton.classList.add('hidden'); \n    \n\n    const data = await fetchImages(query, page, perPage);\n\n    hideLoader(); \n    \n    \n    if (data.hits.length === 0 && page === 1) {\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    appendImages(data.hits);\n    \n    \n    if (data.hits.length < perPage || data.totalHits <= page * perPage) {\n      showErrorMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreButton.classList.remove('hidden'); \n      \n    }\n\nsmoothScroll(); \n  } catch (error) {\n    hideLoader();\n    showErrorMessage('Something went wrong. Please try again later.');\n\n  \n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2, \n    behavior: 'smooth',  \n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","lightbox","appendImages","images","gallery","markup","image","SimpleLightbox","showErrorMessage","message","iziToast","form","input","loader","loadMoreButton","currentPage","showLoader","hideLoader","onSearch","onLoadMore","event","loadImages","data","smoothScroll","cardHeight"],"mappings":"owBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAIV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAE9J,GAAI,CAEJ,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACrCA,CAET,CAEH,CCXA,IAAIC,EASG,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAASF,EAAO,IAAIG,GACjB;AAAA;AAAA,mBAEQA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6BAG/BA,EAAM,KAAK;AAAA,6BACXA,EAAM,KAAK;AAAA,gCACRA,EAAM,QAAQ;AAAA,iCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI7C,EAAE,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAE1CJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIM,EAAe,YAAY,CAE9C,CAEO,SAASC,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,CACJ,CAAG,CACH,CC7CA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQD,EAAK,cAAc,2BAA2B,EACtDP,EAAU,SAAS,cAAc,UAAU,EAC3CS,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EAClB,MAAMlB,EAAU,GAChB,IAAIF,EAAQ,GAKZ,SAASqB,GAAa,CACpBH,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASI,GAAa,CACpBJ,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEAF,EAAK,iBAAiB,SAAUO,CAAQ,EACxCJ,EAAe,iBAAiB,QAASK,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAO7B,GANAA,EAAM,eAAc,EAEpBzB,EAAQiB,EAAM,MAAM,OACpBR,EAAQ,UAAY,GACpBW,EAAc,EAEVpB,IAAU,GAAI,CAChBa,EAAiB,8BAA8B,EAC/C,MACD,CAED,MAAMa,EAAW1B,EAAOoB,CAAW,CACrC,CAEA,eAAeI,GAAa,CAC1BJ,IACA,MAAMM,EAAW1B,EAAOoB,CAAW,CACrC,CAEA,eAAeM,EAAW1B,EAAOC,EAAM,CACrC,GAAI,CACFoB,IAEAF,EAAe,UAAU,IAAI,QAAQ,EAGrC,MAAMQ,EAAO,MAAM5B,EAAYC,EAAOC,EAAMC,CAAO,EAKnD,GAHAoB,IAGIK,EAAK,KAAK,SAAW,GAAK1B,IAAS,EAAG,CACxCY,EAAiB,0EAA0E,EAC3F,MACD,CAEDN,EAAaoB,EAAK,IAAI,EAGlBA,EAAK,KAAK,OAASzB,GAAWyB,EAAK,WAAa1B,EAAOC,EACzDW,EAAiB,4DAA4D,EAE7EM,EAAe,UAAU,OAAO,QAAQ,EAI9CS,GACG,MAAe,CACdN,IACAT,EAAiB,+CAA+C,CAGjE,CACH,CAEA,SAASe,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBAEpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}